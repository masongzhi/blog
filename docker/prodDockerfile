FROM masongzhi/blog:prod

WORKDIR /app
COPY . .

RUN npm run build
RUN cp -r build/* /usr/share/nginx/html/
RUN cp docker/nginx.conf /etc/nginx/nginx.conf
RUN cp docker/mime.types /etc/nginx/mime.types
RUN rm -rf node_modules
RUN rm -rf client
RUN rm -rf static
RUN rm -rf build

EXPOSE 9010
