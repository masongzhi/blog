FROM masongzhi/blog-base

WORKDIR /app
COPY . .

RUN npm run build
VOLUME build:/usr/share/nginx/html
RUN cp docker/nginx.conf /etc/nginx/nginx.conf \
    && cp docker/mime.types /etc/nginx/mime.types \
    && rm -rf node_modules \
    && rm -rf client \
    && rm -rf static \
    && rm -rf build \

EXPOSE 9010
